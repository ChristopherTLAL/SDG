---
import { client } from '../lib/sanity/client';
import groq from 'groq';

const categories = await client.fetch(
  groq`*[_type == "category" && defined(slug.current)]{ "slug": slug.current, title }`
);
---
<header class="site-header z-[100] w-full sticky top-0 left-0 bg-black xl:bg-white border-b border-gray-800 xl:border-gray-200">
  <div class="site-header__logo-wrapper h-[77px] xl:h-[110px] w-full px-5 sm:px-10 xl:px-[30px] flex items-center justify-between relative">
    <div class="site-header__logo-inner-wrapper flex gap-6 items-center">
      <a class="text-2xl font-bold text-white xl:text-black font-serif" href="/" aria-label="Chinese SDG Institute Homepage">
        Chinese SDG Institute
      </a>
    </div>
    <nav class="hidden md:flex items-center gap-8">
      {categories.map((cat) => (
        <a href={`/category/${cat.slug.current}`} class="text-white xl:text-black hover:text-gray-400 xl:hover:text-gray-600 transition-colors">
          {cat.title}
        </a>
      ))}
    </nav>
    <div class="md:hidden">
      <button id="mobile-menu-button" type="button" class="block text-white xl:text-black text-[30px] font-icons icon-TI_Menu leading-none transition" aria-label="Toggle Menu">
        <i class="fas fa-bars"></i>
      </button>
    </div>
  </div>
  <div id="mobile-menu" class="hidden md:hidden bg-black xl:bg-white border-t border-gray-800 xl:border-gray-200">
    <nav class="flex flex-col items-center gap-4 py-4">
      {categories.map((cat) => (
        <a href={`/category/${cat.slug.current}`} class="text-white xl:text-black hover:text-gray-400 xl:hover:text-gray-600 transition-colors">
          {cat.title}
        </a>
      ))}
    </nav>
  </div>
</header>

<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const body = document.querySelector('body');

  mobileMenuButton.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    body.classList.toggle('mobile-menu-open');
  });
</script>
